# ğŸ—ï¸ Project Trinity è®¾è®¡åŸåˆ™

## ğŸ”´ æ ¸å¿ƒåŸåˆ™ï¼šæ°¸è¿œä¸è¦é¢‘ç¹é‡å¯æ¨¡å‹æœåŠ¡

### ä¸ºä»€ä¹ˆï¼Ÿ

| æœåŠ¡ | å¯åŠ¨æ—¶é—´ | åŸå›  |
|------|----------|------|
| Brain (Qwen2.5-VL) | 3-5 åˆ†é’Ÿ | vLLM å¼•æ“åˆå§‹åŒ– + KV Cache é¢„åˆ†é… |
| Mouth-CosyVoice | 2-3 åˆ†é’Ÿ | æ¨¡å‹åŠ è½½ + Flow åˆå§‹åŒ– |
| Mouth-VoxCPM | 5-8 åˆ†é’Ÿ | torch.compile JIT ç¼–è¯‘ + Warm up |
| Mouth-IndexTTS | 3-5 åˆ†é’Ÿ | æ¨¡å‹åŠ è½½ + ç¼–è¯‘ |
| Ear (ASR) | 1-2 åˆ†é’Ÿ | FunASR/SenseVoice åˆå§‹åŒ– |

**æ¯æ¬¡é‡å¯ = æµªè´¹ 3-8 åˆ†é’Ÿ = ç ”å‘æ•ˆç‡æ€æ‰‹**

---

## âœ… é«˜æ•ˆç ”å‘æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Logic Server (ç«¯å£ 8000)                                â”‚
â”‚  âœ… æ”¹ä»£ç åç§’çº§é‡å¯ (uvicorn --reload)                   â”‚
â”‚  âœ… æ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½åœ¨è¿™é‡Œ                                   â”‚
â”‚  âœ… ä¸åŒ…å«ä»»ä½• ML æ¨¡å‹                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ HTTP è°ƒç”¨
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Brain       â”‚ Mouth-*     â”‚ Ear         â”‚ (Future)    â”‚
â”‚ (9000)      â”‚ (9001-9004) â”‚ (9002)      â”‚             â”‚
â”‚             â”‚             â”‚             â”‚             â”‚
â”‚ ğŸ”’ å¸¸é©»è¿è¡Œ  â”‚ ğŸ”’ å¸¸é©»è¿è¡Œ  â”‚ ğŸ”’ å¸¸é©»è¿è¡Œ  â”‚ ğŸ”’ å¸¸é©»è¿è¡Œ  â”‚
â”‚ âŒ ä¸è¦é‡å¯  â”‚ âŒ ä¸è¦é‡å¯  â”‚ âŒ ä¸è¦é‡å¯  â”‚ âŒ ä¸è¦é‡å¯  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ è®¾è®¡è§„åˆ™æ¸…å•

### è§„åˆ™ 1: æ‰€æœ‰æ¨ç†å‚æ•°å¿…é¡»æ”¯æŒ API åŠ¨æ€ä¼ é€’

```python
# âŒ é”™è¯¯ç¤ºä¾‹ - ç¡¬ç¼–ç å‚æ•°ï¼Œæ”¹ä¸€ä¸‹å°±è¦é‡å¯
def synthesize(self, text):
    return self.model.generate(text, temperature=0.7)  # ç¡¬ç¼–ç ï¼

# âœ… æ­£ç¡®ç¤ºä¾‹ - åŠ¨æ€å‚æ•°ï¼Œæ— éœ€é‡å¯
def synthesize(self, text, temperature=0.7):  # å‚æ•°åŒ–ï¼
    return self.model.generate(text, temperature=temperature)

# API ç«¯ç‚¹ä¹Ÿè¦æ”¯æŒ
@app.post("/tts")
async def tts(request: dict):
    temperature = request.get("temperature", 0.7)  # ä»è¯·æ±‚è·å–
    ...
```

### è§„åˆ™ 2: æ¨¡å‹æœåŠ¡åªåšæ¨ç†ï¼Œä¸åšä¸šåŠ¡é€»è¾‘

```python
# âŒ é”™è¯¯ç¤ºä¾‹ - åœ¨æ¨¡å‹æœåŠ¡é‡Œå†™ä¸šåŠ¡é€»è¾‘
@app.post("/chat")
async def chat(request):
    # ä¸šåŠ¡é€»è¾‘ï¼šè®°å½•å¯¹è¯ã€è¿‡æ»¤å†…å®¹ã€æ ¼å¼åŒ–...
    log_conversation(...)  # ä¸šåŠ¡é€»è¾‘ä¸åº”è¯¥åœ¨è¿™é‡Œï¼
    result = model.generate(...)
    return result

# âœ… æ­£ç¡®ç¤ºä¾‹ - æ¨¡å‹æœåŠ¡åªåšçº¯æ¨ç†
@app.post("/generate")
async def generate(request):
    # åªæ¥æ”¶å‚æ•°ï¼Œåªè¿”å›ç»“æœ
    return model.generate(
        text=request["text"],
        **request.get("params", {})
    )
```

### è§„åˆ™ 3: æ–°åŠŸèƒ½å¼€å‘æµç¨‹

```
1. åœ¨ Logic Server å†™ä¸šåŠ¡é€»è¾‘
2. ç”¨ Mock æ•°æ®æµ‹è¯•é€»è¾‘æ­£ç¡®æ€§
3. è¿æ¥å·²è¿è¡Œçš„æ¨¡å‹æœåŠ¡æµ‹è¯•
4. åªæœ‰æ¨¡å‹æœåŠ¡æœ¬èº«æœ‰ Bug æ‰é‡å¯å®ƒ
```

### è§„åˆ™ 4: å‚æ•°è°ƒä¼˜æµç¨‹

```bash
# âœ… æ­£ç¡®æ–¹å¼ - é€šè¿‡ API æµ‹è¯•ä¸åŒå‚æ•°
curl -X POST http://localhost:9003/tts/stream \
    -d '{"text": "æµ‹è¯•", "inference_timesteps": 3}'

curl -X POST http://localhost:9003/tts/stream \
    -d '{"text": "æµ‹è¯•", "inference_timesteps": 5}'

# æ‰¾åˆ°æœ€ä¼˜å‚æ•°åï¼Œå†å†³å®šæ˜¯å¦æ›´æ–°é»˜è®¤å€¼
```

---

## ğŸ“‹ å„æœåŠ¡åŠ¨æ€å‚æ•°åˆ—è¡¨

### Brain (LLM)
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| temperature | 0.7 | ç”Ÿæˆéšæœºæ€§ |
| max_tokens | 512 | æœ€å¤§ç”Ÿæˆé•¿åº¦ |
| top_p | 0.9 | æ ¸é‡‡æ · |

### Mouth-VoxCPM (TTS)
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| inference_timesteps | 5 | æ¨ç†æ­¥æ•°ï¼Œè¶Šå°è¶Šå¿« |
| cfg_value | 1.5 | CFG å¼•å¯¼å€¼ |

### Mouth-CosyVoice (TTS)
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| speed | 1.0 | è¯­é€Ÿ |
| stream | true | æ˜¯å¦æµå¼ |

### Ear (ASR)
| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| language | auto | è¯­è¨€æ£€æµ‹ |

---

## ğŸš¨ ä»€ä¹ˆæ—¶å€™æ‰éœ€è¦é‡å¯æ¨¡å‹æœåŠ¡ï¼Ÿ

1. **æ¨¡å‹æƒé‡æ›´æ–°** - æ¢äº†æ–°çš„ checkpoint
2. **æ¨¡å‹ä»£ç  Bug ä¿®å¤** - æ¨ç†é€»è¾‘æœ¬èº«æœ‰é”™è¯¯
3. **ä¾èµ–åº“æ›´æ–°** - PyTorch/Transformers ç‰ˆæœ¬å˜åŒ–
4. **æ˜¾å­˜é…ç½®è°ƒæ•´** - gpu_memory_utilization ç­‰

**é™¤æ­¤ä¹‹å¤–ï¼Œä¸€å¾‹ä¸è¦é‡å¯ï¼**

---

## ğŸ“ ä»£ç å®¡æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰ï¼Œæ£€æŸ¥ï¼š

- [ ] æ–°å¢çš„æ¨ç†å‚æ•°æ˜¯å¦æ”¯æŒ API åŠ¨æ€ä¼ é€’ï¼Ÿ
- [ ] æ˜¯å¦æŠŠä¸šåŠ¡é€»è¾‘å†™è¿›äº†æ¨¡å‹æœåŠ¡ï¼Ÿ
- [ ] æ˜¯å¦æœ‰ç¡¬ç¼–ç çš„é­”æ³•æ•°å­—ï¼Ÿ
- [ ] ä¿®æ”¹æ˜¯å¦çœŸçš„éœ€è¦é‡å¯æœåŠ¡ï¼Ÿ

---

*æœ€åæ›´æ–°: 2026-01-09*
*ä½œè€…: Trinity AI Assistant*






